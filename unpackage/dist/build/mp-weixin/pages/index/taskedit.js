(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/taskedit"],{"0361":function(t,e,a){"use strict";var s=a("763d"),n=a.n(s);n.a},"1be4":function(t,e,a){"use strict";a.r(e);var s=a("9f2e"),n=a("e305");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("0361");var o=a("2877"),c=Object(o["a"])(n["default"],s["a"],s["b"],!1,null,null,null);e["default"]=c.exports},"763d":function(t,e,a){},"86a8":function(t,e,a){"use strict";(function(t){a("9aac"),a("921b");s(a("66fd"));var e=s(a("1be4"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},"9f2e":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n})},e305:function(t,e,a){"use strict";a.r(e);var s=a("e5b8"),n=a.n(s);for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);e["default"]=n.a},e5b8:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{title:"作业编辑",task_subject:"",task_desc:"",task_url:[],objectId:"",filepaths:[],files:[]}},onLoad:function(e){var a=t.getStorageSync("classname");t.setNavigationBarTitle({title:a}),e&&(this.objectId=e.objectId),this.objectId&&this.objectId.length>0&&this.getData()},methods:{getData:function(){var e=this;t.request({url:"https://api2.bmob.cn/1/classes/task/"+this.objectId,data:{},header:{"X-Bmob-Application-Id":"3bea17a55823d07e2487d6db68a04ba0","X-Bmob-REST-API-Key":"c8069787cb4ff2c10d99dae927667233","Content-Type":"application/json"},success:function(t){console.log(t.data),e.task_subject=t.data.task_subject,e.task_desc=t.data.task_desc;var a=t.data.task_url;a&&a.length>0&&(e.task_url=a.split("|"))}})},openCalendar:function(){this.$refs.calendar.open()},formatDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();return a<10&&(a="0"+a),s<10&&(s="0"+s),e+"-"+a+"-"+s},formSubmit:function(){var e=this;if(!(!this.task_subject||this.task_subject.length<=0||!this.task_desc||this.task_desc.length<=0)){if(this.filepaths&&this.filepaths.length>0)for(var a=0;a<this.filepaths.length;a++){var s=this.filepaths[a],n=s.lastIndexOf("/")+1,i=s.substring(n);console.log("file upload: "+s),t.uploadFile({url:"https://api2.bmob.cn/2/files/"+i,filePath:s,header:{"X-Bmob-Application-Id":"3bea17a55823d07e2487d6db68a04ba0","X-Bmob-REST-API-Key":"c8069787cb4ff2c10d99dae927667233","Content-Type":"image/jpeg"},name:"file",formData:{},success:function(t){console.log(t.data);var a=t.data.url;e.task_url&&e.task_url.length>0&&e.task_url.push(a)}})}var o="https://api2.bmob.cn/1/classes/task/",c="POST";this.objectId&&this.objectId.length>0&&(o+=this.objectId,c="PUT");var l=t.getStorageSync("classid"),r=new Date,u=this.formatDate(r)+" 00:00:00";for(o="",a=0;a<this.task_url.length;a++)o+=this.task_url[a],a<this.task_url.length-1&&(o+="|");t.request({url:o,method:c,data:{task_subject:this.task_subject,task_desc:this.task_desc,task_date:{__type:"DATE",iso:u},task_url:o,classid:l},header:{"X-Bmob-Application-Id":"3bea17a55823d07e2487d6db68a04ba0","X-Bmob-REST-API-Key":"c8069787cb4ff2c10d99dae927667233","Content-Type":"application/json"},success:function(a){console.log(a.data.results),t.redirectTo({url:"/pages/index/taskmanage"}),e.filepaths=[]}})}},formReset:function(){t.redirectTo({url:"/pages/index/taskmanage"})},choosePic:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){e.files=t.tempFiles;for(var a=t.tempFilePaths,s=[],n=0;n<e.filepaths.length;n++)s.push(e.filepaths[n]);for(n=0;n<a.length;n++)s.push(a[n]);e.filepaths=s,console.log("File choosed: "+e.filepaths)},error:function(t){console.log(t)}})}}};e.default=a}).call(this,a("543d")["default"])}},[["86a8","common/runtime","common/vendor"]]]);