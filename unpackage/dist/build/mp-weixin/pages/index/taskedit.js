(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/taskedit"],{"0361":function(t,e,a){"use strict";var s=a("763d"),n=a.n(s);n.a},"1be4":function(t,e,a){"use strict";a.r(e);var s=a("cc80"),n=a("e305");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("0361");var o=a("2877"),c=Object(o["a"])(n["default"],s["a"],s["b"],!1,null,null,null);e["default"]=c.exports},"763d":function(t,e,a){},"86a8":function(t,e,a){"use strict";(function(t){a("9aac"),a("921b");s(a("66fd"));var e=s(a("1be4"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},cc80:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n})},e305:function(t,e,a){"use strict";a.r(e);var s=a("e5b8"),n=a.n(s);for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);e["default"]=n.a},e5b8:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{title:"作业编辑",task_subject:"",task_desc:"",task_url:"",image_url_array:[],video_url:"",objectId:"",filepaths:[]}},onLoad:function(e){var a=t.getStorageSync("classname");t.setNavigationBarTitle({title:a}),e&&(this.objectId=e.objectId),this.objectId&&this.objectId.length>0&&this.getData()},methods:{getData:function(){var e=this;t.request({url:"https://api2.bmob.cn/1/classes/task/"+this.objectId,data:{},header:{"X-Bmob-Application-Id":"3bea17a55823d07e2487d6db68a04ba0","X-Bmob-REST-API-Key":"c8069787cb4ff2c10d99dae927667233","Content-Type":"application/json"},success:function(t){console.log(t.data),e.task_subject=t.data.task_subject,e.task_desc=t.data.task_desc,e.task_url=t.data.task_url,e.video_url=t.data.video_url;var a=[];e.task_url&&e.task_url.length>0&&(a=e.task_url.split("---"));for(var s=0;s<a.length;s++)a[s]=a[s].trim();e.image_url_array=a}})},openCalendar:function(){this.$refs.calendar.open()},formatDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();return a<10&&(a="0"+a),s<10&&(s="0"+s),e+"-"+a+"-"+s},deleteSavedImage:function(t){for(var e=0;e<this.image_url_array.length;e++)t==this.image_url_array[e]&&this.image_url_array.splice(e,1)},deleteChoosedImage:function(t){for(var e=0;e<this.filepaths.length;e++)t==this.filepaths[e]&&this.filepaths.splice(e,1)},formSubmit:function(){!this.task_subject||this.task_subject.length<=0||!this.task_desc||this.task_desc.length<=0||this.saveTask()},saveTask:function(){var e="https://api2.bmob.cn/1/classes/task/",a="POST",s=t.getStorageSync("classid"),n=new Date,i=this.formatDate(n)+" 00:00:00",o={task_subject:this.task_subject,task_desc:this.task_desc,task_url:this.task_url,video_url:this.video_url,classid:s};this.objectId&&this.objectId.length>0?(e+=this.objectId,a="PUT"):o.task_date={__type:"DATE",iso:i},t.request({url:e,method:a,data:o,header:{"X-Bmob-Application-Id":"3bea17a55823d07e2487d6db68a04ba0","X-Bmob-REST-API-Key":"c8069787cb4ff2c10d99dae927667233","Content-Type":"application/json"},success:function(e){console.log(e.data.results),t.redirectTo({url:"/pages/index/taskmanage"})}})},formReset:function(){t.redirectTo({url:"/pages/index/taskmanage"})},choosePic:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){for(var a=t.tempFilePaths,s=[],n=0;n<e.filepaths.length;n++)s.push(e.filepaths[n]);for(n=0;n<a.length;n++)s.push(a[n]);e.filepaths=s,console.log("File choosed: "),console.log(e.filepaths)},error:function(t){console.log(t)}})}}};e.default=a}).call(this,a("543d")["default"])}},[["86a8","common/runtime","common/vendor"]]]);